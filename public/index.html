<!DOCTYPE html>
<html lang="en">
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon"
        href="data:image/png;base64,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" />
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <title>语音合成</title>
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: #f5f5f5;
        }

        main {
            margin: 10px;
        }

        main[x-cloak] {
            opacity: 0;
        }

        main:not([x-cloak]) {
            opacity: 1;
            transition: opacity .3s;
        }

        h1 {
            text-align: center;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        select,
        textarea {
            width: 100%;
            padding: 5px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 1rem;
            color: #33404d;
            transition: border .3s, box-shadow .3s;
        }

        textarea:focus {
            box-shadow: 0 0 0 .25rem var(--color-primary-alpha);
            border-color: var(--color-primary);
            outline: 0;
        }


        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        audio {
            margin-top: 20px;
            display: block;
        }


        .footer {
            width: 100%;
            background-color: #f5f5f5;
            z-index: 9999;
            position: fixed;
            bottom: 0;
            left: 0;
            text-align: center;
        }

        .footer .container {
            max-width: 100%;
            padding-left: 0;
            padding-right: 0;
        }

        .container .text-muted {
            line-height: 20px;
            padding-left: 0;
            position: relative;
            margin-bottom: 10px;
            text-align: center;
        }

        .text-muted {
            margin-bottom: 10px !important
        }

        .text-muted span {
            display: block;
            font-size: 11px
        }

        a {
            text-decoration: none;
        }
    </style>
</head>

<body>
    <main>
        <h1>语音合成</h1>
        <div>
            <label for="voiceSelect">声音：</label>
            <select id="voiceSelect"></select>
            <label for="voiceStyleSelect">声音风格：</label>
            <select id="voiceStyleSelect"></select>
            <label for="rateRange">语速：</label>
            <input type="range" id="rateRange" min="0" max="100" value="0">
            <label for="pitchRange">音调：</label>
            <input type="range" id="pitchRange" min="0" max="100" value="0">
            <label for="ssmlInput">SSML 文本：</label>
            <textarea id="ssmlInput" rows="4" cols="50"></textarea>
            <button onclick="playAudio()">播放音频</button>
            <button onclick="downloadAudio()">下载音频</button>
        </div>
        <audio id="audioPlayer" controls></audio>
    </main>



    <footer class="footer">
        <div class="container text-center">
            <p>本程序基于Azure tts，开源于<a href="https://github.com/x-dr/tts" target="_blank">GItHub</a></p>
        </div>
    </footer>

    <script>
        const voiceStyles = [{ "LocalName": "晓辰", "ShortName": "zh-CN-XiaochenNeural", "VoiceStyleNames": [""] }, { "LocalName": "晓晓", "ShortName": "zh-CN-XiaoxiaoNeural", "VoiceStyleNames": ["assistant", "chat", "customerservice", "newscast", "affectionate", "angry", "calm", "cheerful", "disgruntled", "fearful", "gentle", "lyrical", "sad", "serious", "poetry-reading", "friendly", "Default"] }, { "LocalName": "晓萱", "ShortName": "zh-CN-XiaoxuanNeural", "VoiceStyleNames": ["calm", "fearful", "cheerful", "disgruntled", "serious", "angry", "gentle", "depressed", "Default"] }, { "LocalName": "晓涵", "ShortName": "zh-CN-XiaohanNeural", "VoiceStyleNames": ["calm", "fearful", "cheerful", "disgruntled", "serious", "angry", "sad", "gentle", "affectionate", "embarrassed", "Default"] }, { "LocalName": "晓甄", "ShortName": "zh-CN-XiaozhenNeural", "VoiceStyleNames": ["angry", "disgruntled", "cheerful", "fearful", "sad", "serious", "Default"] }, { "LocalName": "云健", "ShortName": "zh-CN-YunjianNeural", "VoiceStyleNames": ["narration-relaxed", "sports-commentary", "sports-commentary-excited", "angry", "disgruntled", "cheerful", "sad", "serious", "depressed", "documentary-narration", "Default"] }, { "LocalName": "晓颜", "ShortName": "zh-CN-XiaoyanNeural", "VoiceStyleNames": [""] }, { "LocalName": "晓伊", "ShortName": "zh-CN-XiaoyiNeural", "VoiceStyleNames": ["angry", "disgruntled", "affectionate", "cheerful", "fearful", "sad", "embarrassed", "serious", "gentle", "Default"] }, { "LocalName": "云皓", "ShortName": "zh-CN-YunhaoNeural", "VoiceStyleNames": ["advertisement-upbeat", "Default"] }, { "LocalName": "曉佳（香港）", "ShortName": "zh-HK-HiuGaaiNeural", "VoiceStyleNames": [""] }, { "LocalName": "晓妮（陕西）", "ShortName": "zh-CN-shaanxi-XiaoniNeural", "VoiceStyleNames": [""] }, { "LocalName": "晓双", "ShortName": "zh-CN-XiaoshuangNeural", "VoiceStyleNames": ["chat", "Default"] }, { "LocalName": "晓梦", "ShortName": "zh-CN-XiaomengNeural", "VoiceStyleNames": ["chat", "Default"] }, { "LocalName": "云枫", "ShortName": "zh-CN-YunfengNeural", "VoiceStyleNames": ["angry", "disgruntled", "cheerful", "fearful", "sad", "serious", "depressed", "Default"] }, { "LocalName": "云泽", "ShortName": "zh-CN-YunzeNeural", "VoiceStyleNames": ["calm", "fearful", "cheerful", "disgruntled", "serious", "angry", "sad", "depressed", "documentary-narration", "Default"] }, { "LocalName": "曉臻（台湾）", "ShortName": "zh-TW-HsiaoChenNeural", "VoiceStyleNames": [""] }, { "LocalName": "晓北（辽宁）", "ShortName": "zh-CN-liaoning-XiaobeiNeural", "VoiceStyleNames": [""] }, { "LocalName": "晓秋", "ShortName": "zh-CN-XiaoqiuNeural", "VoiceStyleNames": [""] }, { "LocalName": "云野", "ShortName": "zh-CN-YunyeNeural", "VoiceStyleNames": ["embarrassed", "calm", "fearful", "cheerful", "disgruntled", "serious", "angry", "sad", "Default"] }, { "LocalName": "云希（四川）", "ShortName": "zh-CN-sichuan-YunxiNeural", "VoiceStyleNames": [""] }, { "LocalName": "晓睿", "ShortName": "zh-CN-XiaoruiNeural", "VoiceStyleNames": ["calm", "fearful", "angry", "sad", "Default"] }, { "LocalName": "云希", "ShortName": "zh-CN-YunxiNeural", "VoiceStyleNames": ["narration-relaxed", "embarrassed", "fearful", "cheerful", "disgruntled", "serious", "angry", "sad", "depressed", "chat", "assistant", "newscast", "Default"] }, { "LocalName": "雲哲（台湾）", "ShortName": "zh-TW-YunJheNeural", "VoiceStyleNames": [""] }, { "LocalName": "晓悠", "ShortName": "zh-CN-XiaoyouNeural", "VoiceStyleNames": [""] }, { "LocalName": "云夏", "ShortName": "zh-CN-YunxiaNeural", "VoiceStyleNames": ["calm", "fearful", "cheerful", "angry", "sad", "Default"] }, { "LocalName": "云登（河南）", "ShortName": "zh-CN-henan-YundengNeural", "VoiceStyleNames": [""] }, { "LocalName": "云扬", "ShortName": "zh-CN-YunyangNeural", "VoiceStyleNames": ["customerservice", "narration-professional", "newscast-casual", "Default"] }, { "LocalName": "曉雨（台湾）", "ShortName": "zh-TW-HsiaoYuNeural", "VoiceStyleNames": [""] }, { "LocalName": "雲龍（香港）", "ShortName": "zh-HK-WanLungNeural", "VoiceStyleNames": [""] }, { "LocalName": "晓墨", "ShortName": "zh-CN-XiaomoNeural", "VoiceStyleNames": ["embarrassed", "calm", "fearful", "cheerful", "disgruntled", "serious", "angry", "sad", "depressed", "affectionate", "gentle", "envious", "Default"] }, { "LocalName": "曉曼（香港）", "ShortName": "zh-HK-HiuMaanNeural", "VoiceStyleNames": [""] }, { "LocalName": "晓翔（山东）", "ShortName": "zh-CN-shandong-YunxiangNeural", "VoiceStyleNames": [""] }]
        const voiceSelect = document.getElementById("voiceSelect");
        const voiceStyleSelect = document.getElementById("voiceStyleSelect");

        // 添加声音选项到下拉菜单
        voiceStyles.forEach(voiceStyle => {
            const option = document.createElement("option");
            option.value = voiceStyle.ShortName;
            option.text = voiceStyle.LocalName;
            voiceSelect.appendChild(option);
        });

        // 更新声音风格选项
        function updateVoiceStyleOptions() {
            const selectedVoice = voiceSelect.value;
            const selectedVoiceStyle = voiceStyles.find(voiceStyle => voiceStyle.ShortName === selectedVoice);
            // 清空现有选项
            while (voiceStyleSelect.firstChild) {
                voiceStyleSelect.removeChild(voiceStyleSelect.firstChild);
            }
            // 添加新选项
            if (selectedVoiceStyle && selectedVoiceStyle.VoiceStyleNames) {
                selectedVoiceStyle.VoiceStyleNames.forEach(voiceStyleName => {
                    const option = document.createElement("option");
                    option.value = voiceStyleName;
                    option.text = voiceStyleName;
                    voiceStyleSelect.appendChild(option);
                });
            }
        }

        // 当声音选项更改时更新声音风格选项
        voiceSelect.addEventListener("change", updateVoiceStyleOptions);

        function playAudio() {
            const voice = document.getElementById("voiceSelect").value;
            const voiceStyle = document.getElementById("voiceStyleSelect").value;
            const rate = document.getElementById("rateRange").value;
            const pitch = document.getElementById("pitchRange").value;
            const text = document.getElementById("ssmlInput").value;
            const audioPlayer = document.getElementById("audioPlayer");
            const url = `/audio?voice=${encodeURIComponent(voice)}&voiceStyle=${encodeURIComponent(voiceStyle)}&rate=${encodeURIComponent(rate)}&pitch=${encodeURIComponent(pitch)}&text=${encodeURIComponent(text)}`;
            console.log(voiceStyle);
            audioPlayer.src = url;
            audioPlayer.onerror = function () {
                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                        alert("Failed to generate audio")
                        const errorText = "Failed to generate audio: " + data.error;
                    })
                    .catch(error =>
                        console.log(error));
            };
            audioPlayer.play();
        }

        function downloadAudio() {
            const voice = document.getElementById("voiceSelect").value;
            const voiceStyle = document.getElementById("voiceStyleSelect").value;
            const rate = document.getElementById("rateRange").value;
            const pitch = document.getElementById("pitchRange").value;
            const text = document.getElementById("ssmlInput").value;
            const url = `/audio?voice=${encodeURIComponent(voice)}&voiceStyle=${encodeURIComponent(voiceStyle)}&rate=${encodeURIComponent(rate)}&pitch=${encodeURIComponent(pitch)}&text=${encodeURIComponent(text)}`;
            const link = document.createElement('a');
            link.href = url;
            link.download = 'audio.mp3';
            link.style.display = 'none';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>
</body>

</html>